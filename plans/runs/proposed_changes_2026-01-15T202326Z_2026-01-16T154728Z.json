{
  "plan_id": "plan-2026-01-15T202326Z-2026-01-16T154728Z",
  "plan_version": "C1.1",
  "created_utc": "2026-01-16T15:47:28.046910+00:00",
  "snapshot_id": "2026-01-15T202326Z",
  "snapshot_version": "A3.0",
  "sources": {
    "google_ads_customer_id": "9256598060",
    "google_ads_login_customer_id": "5194867886",
    "merchant_center_id": "5308355318"
  },
  "mode": "DRY_RUN",
  "plan_context": {
    "brand_terms_version": "2026-01-16",
    "brand_terms": [],
    "manufacturer_brands": [
      "rheem",
      "goodman",
      "solace",
      "daikin",
      "ruud",
      "amana"
    ],
    "thresholds": {
      "brand_cpc_max": 2.0,
      "roas_target": 4.0
    },
    "lookback_days": 30,
    "planner_rules_applied": [
      "rule:S1:broad_match_in_branded",
      "rule:S2:non_brand_in_branded",
      "rule:S3:branded_bidding_strategy",
      "rule:S4:manufacturer_brand_in_assets",
      "rule:S5:merchant_disapproved"
    ],
    "notes": "Generated with ruleset=safety, max_ops=50"
  },
  "guardrails": {
    "max_total_ops": 50,
    "max_ops_by_type": {
      "ADS_SET_KEYWORD_STATUS": 20,
      "ADS_ADD_NEGATIVE_KEYWORD": 20,
      "ADS_SET_KEYWORD_MATCH_TYPE": 10,
      "ADS_UPDATE_ASSET_TEXT": 5,
      "ADS_REMOVE_ASSET": 5,
      "MERCHANT_EXCLUDE_PRODUCT": 10,
      "ADS_UPDATE_BID_STRATEGY": 0,
      "ADS_UPDATE_BUDGET": 0
    },
    "forbid_budget_changes": true,
    "forbid_campaign_pause": true,
    "forbid_campaign_enable": false,
    "max_budget_pct_change": 0,
    "forbid_broad_match": true,
    "forbid_manufacturer_brand_negatives": true,
    "forbid_bid_strategy_changes": true,
    "forbid_conversion_goal_changes": true,
    "forbid_location_targeting_changes": true,
    "forbid_url_expansion_changes": true,
    "forbid_auto_apply_settings": true,
    "max_text_edit_chars": 100,
    "allowlist_campaign_ids": null,
    "blocklist_campaign_ids": [],
    "require_manual_approval_for_types": [
      "ADS_REMOVE_ASSET",
      "MERCHANT_EXCLUDE_PRODUCT"
    ],
    "require_precondition_match": true,
    "abort_on_missing_entity": true,
    "abort_on_first_error": false,
    "max_risk_level": "MEDIUM"
  },
  "summary": {
    "total_operations": 3,
    "total_findings": 1,
    "operations_by_type": {
      "ADS_SET_KEYWORD_STATUS": 3
    },
    "operations_by_risk": {
      "LOW": 0,
      "MEDIUM": 3,
      "HIGH": 0
    },
    "estimated_api_calls": 3,
    "platforms_affected": [
      "GOOGLE_ADS"
    ],
    "campaigns_affected": [
      "20958985895"
    ],
    "risk_score": "MEDIUM",
    "risk_summary": "3 medium-risk | Findings: 1 INFO",
    "requires_approval": false,
    "approval_required_ops": [],
    "findings": [
      {
        "rule_id": "rule:S5:merchant_disapproved",
        "level": "INFO",
        "message": "12 disapproved products found; 0 in discontinued list (proposed for exclusion)",
        "entity_ref": null
      }
    ]
  },
  "operations": [
    {
      "op_id": "op-001-2b61cad940e4",
      "op_type": "ADS_SET_KEYWORD_STATUS",
      "entity_ref": "ads.keyword:2174994044637",
      "entity": {
        "platform": "GOOGLE_ADS",
        "entity_type": "KEYWORD",
        "entity_id": "2174994044637",
        "entity_name": "buy comfort direct",
        "parent_refs": [
          "ads.customer:9256598060",
          "ads.campaign:20958985895",
          "ads.ad_group:154784588541"
        ]
      },
      "intent": "Pause non-brand keyword 'buy comfort direct' in Branded campaign to maintain brand purity",
      "before": {
        "text": "buy comfort direct",
        "match_type": "PHRASE",
        "status": "ENABLED"
      },
      "after": {
        "text": "buy comfort direct",
        "match_type": "PHRASE",
        "status": "PAUSED"
      },
      "preconditions": [
        {
          "path": "status",
          "op": "EQUALS",
          "value": "ENABLED",
          "description": "Keyword must still be enabled"
        },
        {
          "path": "campaign.id",
          "op": "EQUALS",
          "value": "20958985895",
          "description": "Keyword must be in Branded campaign"
        }
      ],
      "rollback": {
        "type": "RESTORE_BEFORE",
        "data": {
          "status": "ENABLED"
        },
        "notes": "Re-enable keyword if rollback needed"
      },
      "risk": {
        "level": "MEDIUM",
        "level_numeric": 2,
        "reasons": [
          "Non-brand keyword in Branded campaign dilutes brand protection",
          "Pausing may reduce impressions for this term"
        ],
        "mitigations": [
          "Keyword can be re-enabled via rollback",
          "Term may be better served by Offensive campaign"
        ]
      },
      "evidence": [
        {
          "snapshot_path": "normalized/ads/keywords.json",
          "key": "id",
          "value": "2174994044637",
          "field_path": null,
          "note": "Keyword 'buy comfort direct' is not a recognized brand term"
        }
      ],
      "evidence_query": "keywords WHERE campaign_id='20958985895' AND status='ENABLED' AND text NOT IN brand_terms",
      "created_from_rule": "rule:S2:non_brand_in_branded",
      "approved": false,
      "approval_notes": null
    },
    {
      "op_id": "op-002-5bf7e3b45e53",
      "op_type": "ADS_SET_KEYWORD_STATUS",
      "entity_ref": "ads.keyword:2328397972249",
      "entity": {
        "platform": "GOOGLE_ADS",
        "entity_type": "KEYWORD",
        "entity_id": "2328397972249",
        "entity_name": "buycomfortdirect",
        "parent_refs": [
          "ads.customer:9256598060",
          "ads.campaign:20958985895",
          "ads.ad_group:154784588541"
        ]
      },
      "intent": "Pause non-brand keyword 'buycomfortdirect' in Branded campaign to maintain brand purity",
      "before": {
        "text": "buycomfortdirect",
        "match_type": "PHRASE",
        "status": "ENABLED"
      },
      "after": {
        "text": "buycomfortdirect",
        "match_type": "PHRASE",
        "status": "PAUSED"
      },
      "preconditions": [
        {
          "path": "status",
          "op": "EQUALS",
          "value": "ENABLED",
          "description": "Keyword must still be enabled"
        },
        {
          "path": "campaign.id",
          "op": "EQUALS",
          "value": "20958985895",
          "description": "Keyword must be in Branded campaign"
        }
      ],
      "rollback": {
        "type": "RESTORE_BEFORE",
        "data": {
          "status": "ENABLED"
        },
        "notes": "Re-enable keyword if rollback needed"
      },
      "risk": {
        "level": "MEDIUM",
        "level_numeric": 2,
        "reasons": [
          "Non-brand keyword in Branded campaign dilutes brand protection",
          "Pausing may reduce impressions for this term"
        ],
        "mitigations": [
          "Keyword can be re-enabled via rollback",
          "Term may be better served by Offensive campaign"
        ]
      },
      "evidence": [
        {
          "snapshot_path": "normalized/ads/keywords.json",
          "key": "id",
          "value": "2328397972249",
          "field_path": null,
          "note": "Keyword 'buycomfortdirect' is not a recognized brand term"
        }
      ],
      "evidence_query": "keywords WHERE campaign_id='20958985895' AND status='ENABLED' AND text NOT IN brand_terms",
      "created_from_rule": "rule:S2:non_brand_in_branded",
      "approved": false,
      "approval_notes": null
    },
    {
      "op_id": "op-003-dfe2cc30a201",
      "op_type": "ADS_SET_KEYWORD_STATUS",
      "entity_ref": "ads.keyword:2459101473496",
      "entity": {
        "platform": "GOOGLE_ADS",
        "entity_type": "KEYWORD",
        "entity_id": "2459101473496",
        "entity_name": "buycomfortdirect.com",
        "parent_refs": [
          "ads.customer:9256598060",
          "ads.campaign:20958985895",
          "ads.ad_group:154784588541"
        ]
      },
      "intent": "Pause non-brand keyword 'buycomfortdirect.com' in Branded campaign to maintain brand purity",
      "before": {
        "text": "buycomfortdirect.com",
        "match_type": "EXACT",
        "status": "ENABLED"
      },
      "after": {
        "text": "buycomfortdirect.com",
        "match_type": "EXACT",
        "status": "PAUSED"
      },
      "preconditions": [
        {
          "path": "status",
          "op": "EQUALS",
          "value": "ENABLED",
          "description": "Keyword must still be enabled"
        },
        {
          "path": "campaign.id",
          "op": "EQUALS",
          "value": "20958985895",
          "description": "Keyword must be in Branded campaign"
        }
      ],
      "rollback": {
        "type": "RESTORE_BEFORE",
        "data": {
          "status": "ENABLED"
        },
        "notes": "Re-enable keyword if rollback needed"
      },
      "risk": {
        "level": "MEDIUM",
        "level_numeric": 2,
        "reasons": [
          "Non-brand keyword in Branded campaign dilutes brand protection",
          "Pausing may reduce impressions for this term"
        ],
        "mitigations": [
          "Keyword can be re-enabled via rollback",
          "Term may be better served by Offensive campaign"
        ]
      },
      "evidence": [
        {
          "snapshot_path": "normalized/ads/keywords.json",
          "key": "id",
          "value": "2459101473496",
          "field_path": null,
          "note": "Keyword 'buycomfortdirect.com' is not a recognized brand term"
        }
      ],
      "evidence_query": "keywords WHERE campaign_id='20958985895' AND status='ENABLED' AND text NOT IN brand_terms",
      "created_from_rule": "rule:S2:non_brand_in_branded",
      "approved": false,
      "approval_notes": null
    }
  ],
  "approvals": {
    "plan_approved": false,
    "approved_by": null,
    "approved_at": null,
    "approval_notes": null,
    "operations_requiring_approval": [],
    "operation_approvals": {}
  },
  "integrity": {
    "snapshot_manifest_hash": null,
    "plan_operations_hash": null,
    "generated_by": "plan_changes.py",
    "generator_version": "C2.0"
  }
}